## АВЛ-дерево - это
➢АВЛ-дерево - это бинарное дерево поиска сбалансированное по высоте так, что разница между высотами левого и правого поддерева каждого узла не более 1.
![[Pasted image 20260113085121.png]]
➢Т.е.:
| h1 - h2 | <= 1

➢Для возможности добавления нескольких одинаковых элементов в АВЛ-дерево необходимо небольшое изменение условия бинарного дерева поиска для левого поддерева узла:
●В левом поддереве узла X могут находится узлы со значением равным значению узла X (т.е. с < меняется на <=).
➢Например, становится возможно дерево:![[Pasted image 20260113085309.png]]

## Балансировка
➢Перед тем, как переходить к основным операциям, связанным с АВЛ-деревьями, рассмотрим понятие балансировки.
➢Балансировка АВЛ-дерева заключается в перестроении его структуры для соблюдения условий его построения. (Иногда условие по высоте перестает соблюдаться, тогда и необходима балансировка).
![[Pasted image 20260113085517.png]]➢Рассмотрим основные операции балансировки:

●Малый левый поворот. Используется когда разница высот поддерева A и Y-поддерева равна 2 и h(B) <= h(C) где h() - высота поддерева.![[Pasted image 20260113085657.png]]
●Малый правый поворот. Используется когда разница высот поддерева X и C-поддерева равна 2 и h(B) <= h(A).
![[Pasted image 20260113085802.png]]
●Большой левый поворот. Используется когда разница высот поддерева A и Z-поддерева равна 2 и h(Y) > h(D).![[Pasted image 20260113085815.png]]
●Большой левый поворот. Используется когда разница высот поддерева A и Z-поддерева равна 2 и h(Y) > h(D).
![[Pasted image 20260113090026.png]]

## Поиск ключу
➢Аналогично поиску в бинарном дереве поиска: спускаемся вниз по текущему АВЛ-дереву, выбирая направление спуска, как результат сравнения искомого ключа со значением ключа текущего узла (Если совпал ключ с искомым, то поиск завершен, если искомый меньше или равен текущему, то идем в левую ветку, иначе в правую).

## Добавление нового ключа
➢Спускаемся вниз по текущему АВЛ-дереву, выбирая направление спуска как результат сравнения добавляемого ключа со значением ключа текущего узла.
➢После нахождения пустого места для вставки, выполняем вставку нового ключа.
➢Обратно возвращаемся тем же путем к корню дерева (снизу вверх) и выполняем операции балансировки в случае, если нарушено условие по разности высот для текущего узла подъема.

## Удаление ключа
➢Выполняем поиск узла с ключом, который хотим удалить.
➢Если он есть, то:
	●Если у найденного узла нет правого поддерева, то просто удаляем его и ставим вместо него левое поддерево. Обратно возвращаемся тем же путем к корню дерева и выполняем операции балансировки.
	●Иначе находим в правом поддереве узел с минимальным ключом и убираем его, удаляемый ключ заменяем на убранный минимальный ключ. Возвращаемся к корню, выполняя балансировку.

### Зачем?
➢АВЛ-деревья (как и другие деревья поиска с балансировкой) используются так как все операции над деревьями поиска зависят от высоты дерева.

➢Выставляя дополнительные ограничения на высоту мы тем самым сокращаем время каждой операции поиска, жертвуя дополнительными затратами на балансировку при вставке и удалении.