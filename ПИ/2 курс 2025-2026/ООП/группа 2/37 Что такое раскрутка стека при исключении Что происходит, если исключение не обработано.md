–û—Ç–ª–∏—á–Ω—ã–π –∏ –≤–∞–∂–Ω—ã–π –≤–æ–ø—Ä–æ—Å! **–†–∞—Å–∫—Ä—É—Ç–∫–∞ —Å—Ç–µ–∫–∞ (stack unwinding)** ‚Äî —ç—Ç–æ –∫–ª—é—á–µ–≤–æ–π –ø—Ä–æ—Ü–µ—Å—Å, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –≤—ã–±—Ä–æ—Å–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤ C++.

## **–ß—Ç–æ —Ç–∞–∫–æ–µ —Ä–∞—Å–∫—Ä—É—Ç–∫–∞ —Å—Ç–µ–∫–∞?**

**–†–∞—Å–∫—Ä—É—Ç–∫–∞ —Å—Ç–µ–∫–∞** ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –≤—ã—Ö–æ–¥–∞ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–π (—Å –≤–æ–∑–≤—Ä–∞—Ç–æ–º –∏–∑ –≤—ã–∑–æ–≤–æ–≤) –ø—Ä–∏ –ø–æ–∏—Å–∫–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏—è, –≤ —Ö–æ–¥–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –¥–ª—è –≤—Å–µ—Ö –ª–æ–∫–∞–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã.

### **–ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä —Ä–∞—Å–∫—Ä—É—Ç–∫–∏**

```cpp
#include <iostream>
#include <memory>

class Resource {
    std::string name;
public:
    Resource(const std::string& n) : name(n) {
        std::cout << "–°–æ–∑–¥–∞–Ω —Ä–µ—Å—É—Ä—Å: " << name << std::endl;
    }
    
    ~Resource() {
        std::cout << "–£–Ω–∏—á—Ç–æ–∂–µ–Ω —Ä–µ—Å—É—Ä—Å: " << name << std::endl;
    }
};

void func3() {
    Resource r3("R3");  // –õ–æ–∫–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç –≤ func3
    throw std::runtime_error("–û—à–∏–±–∫–∞ –≤ func3!");
    std::cout << "–≠—Ç–æ—Ç –∫–æ–¥ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è" << std::endl;
}

void func2() {
    Resource r2("R2");  // –õ–æ–∫–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç –≤ func2
    func3();
    std::cout << "–≠—Ç–æ—Ç –∫–æ–¥ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è" << std::endl;
}

void func1() {
    Resource r1("R1");  // –õ–æ–∫–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç –≤ func1
    func2();
    std::cout << "–≠—Ç–æ—Ç –∫–æ–¥ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è" << std::endl;
}

int main() {
    try {
        func1();
    }
    catch (const std::exception& e) {
        std::cout << "–ü–æ–π–º–∞–ª–∏: " << e.what() << std::endl;
    }
    
    return 0;
}
```

**–í—ã–≤–æ–¥ –ø—Ä–æ–≥—Ä–∞–º–º—ã:**
```
–°–æ–∑–¥–∞–Ω —Ä–µ—Å—É—Ä—Å: R1
–°–æ–∑–¥–∞–Ω —Ä–µ—Å—É—Ä—Å: R2
–°–æ–∑–¥–∞–Ω —Ä–µ—Å—É—Ä—Å: R3
–£–Ω–∏—á—Ç–æ–∂–µ–Ω —Ä–µ—Å—É—Ä—Å: R3  ‚Üê –†–∞—Å–∫—Ä—É—Ç–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∑–¥–µ—Å—å
–£–Ω–∏—á—Ç–æ–∂–µ–Ω —Ä–µ—Å—É—Ä—Å: R2  ‚Üê –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ä–∞—Å–∫—Ä—É—Ç–∫—É
–£–Ω–∏—á—Ç–æ–∂–µ–Ω —Ä–µ—Å—É—Ä—Å: R1  ‚Üê –ó–∞–≤–µ—Ä—à–∞–µ–º —Ä–∞—Å–∫—Ä—É—Ç–∫—É
–ü–æ–π–º–∞–ª–∏: –û—à–∏–±–∫–∞ –≤ func3!
```

## **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ä–∞—Å–∫—Ä—É—Ç–∫–∞ —Å—Ç–µ–∫–∞ —à–∞–≥ –∑–∞ —à–∞–≥–æ–º**

```cpp
void level3() {
    Object obj3("Level3 Object");
    throw MyException();  // 1. –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –±—Ä–æ—à–µ–Ω–æ!
    // 2. –ö–æ–Ω—Ç—Ä–æ–ª—å –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ level3
}

void level2() {
    Object obj2("Level2 Object");
    level3();
    // 3. level3 –Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å –Ω–æ—Ä–º–∞–ª—å–Ω–æ
}

void level1() {
    Object obj1("Level1 Object");
    level2();
    // 4. level2 –Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å –Ω–æ—Ä–º–∞–ª—å–Ω–æ
}

int main() {
    try {
        level1();
    }
    catch (const MyException&) {
        // 8. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–π–¥–µ–Ω!
    }
}
```

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ–±—ã—Ç–∏–π:**

```
1. –ë—Ä–æ—Å–æ–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤ level3()
   ‚Üì
2. –í—ã—Ö–æ–¥ –∏–∑ level3():
   - –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä obj3
   - –ò—Å–∫–ª—é—á–µ–Ω–∏–µ "–ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è" –≤–≤–µ—Ä—Ö
   ‚Üì
3. –í—ã—Ö–æ–¥ –∏–∑ level2():
   - –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä obj2
   - –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –¥–≤–∏–∂–µ–Ω–∏–µ –≤–≤–µ—Ä—Ö
   ‚Üì
4. –í—ã—Ö–æ–¥ –∏–∑ level1():
   - –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä obj1
   ‚Üì
5. –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç main()
   ‚Üì
6. –ü–æ–∏—Å–∫ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –≤ try-–±–ª–æ–∫–µ main()
   ‚Üì
7. –ù–∞–π–¥–µ–Ω –ø–æ–¥—Ö–æ–¥—è—â–∏–π catch-–±–ª–æ–∫
   ‚Üì
8. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –≤ catch-–±–ª–æ–∫–µ
```

## **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –µ—Å–ª–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ?**

### **–°—Ü–µ–Ω–∞—Ä–∏–π: –Ω–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞**

```cpp
#include <iostream>
#include <exception>

void dangerous_function() {
    throw std::runtime_error("–ö–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞!");
}

int main() {
    // –ù–ï–¢ try-catch –±–ª–æ–∫–∞!
    dangerous_function();  // –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ
    
    std::cout << "–≠—Ç–æ—Ç –∫–æ–¥ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è" << std::endl;
    return 0;
}
```

### **–ü—Ä–æ—Ü–µ—Å—Å –ø—Ä–∏ –Ω–µ–ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–Ω–æ–º –∏—Å–∫–ª—é—á–µ–Ω–∏–∏**

1. **–ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è —Ä–∞—Å–∫—Ä—É—Ç–∫–∞ —Å—Ç–µ–∫–∞** –¥–æ —Ñ—É–Ω–∫—Ü–∏–∏ `main()`
2. **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è `std::terminate()`** ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
3. **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `std::terminate()` –≤—ã–∑—ã–≤–∞–µ—Ç `std::abort()`**
4. **–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∞–≤–∞—Ä–∏–π–Ω–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è** —Å implementation-defined —Å—Ç–∞—Ç—É—Å–æ–º

**–í—ã–≤–æ–¥ –ø—Ä–æ–≥—Ä–∞–º–º—ã:**
```
terminate called after throwing an instance of 'std::runtime_error'
  what():  –ö–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞!
Aborted (core dumped)
```

## **`std::terminate()` ‚Äî —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è**

### **–ö–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `std::terminate()`?**

1. **–ò—Å–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ –ø–æ–π–º–∞–Ω–æ** (–¥–æ—Å—Ç–∏–≥–ª–æ `main()` –±–µ–∑ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞)
2. **–ò—Å–∫–ª—é—á–µ–Ω–∏–µ –≤ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ** –≤–æ –≤—Ä–µ–º—è —Ä–∞—Å–∫—Ä—É—Ç–∫–∏ —Å—Ç–µ–∫–∞
3. **–ò—Å–∫–ª—é—á–µ–Ω–∏–µ –≤ `noexcept` —Ñ—É–Ω–∫—Ü–∏–∏**
4. **–ü–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—ã–±—Ä–æ—Å –∏—Å–∫–ª—é—á–µ–Ω–∏—è** –∏–∑ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ `std::unexpected`
5. **–ù–∞—Ä—É—à–µ–Ω–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π** (—É—Å—Ç–∞—Ä–µ–≤—à–µ–µ –≤ C++11+)
6. **–í—ã–∑–æ–≤ `std::terminate()` –Ω–∞–ø—Ä—è–º—É—é**

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–≤–æ–µ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞**

```cpp
#include <iostream>
#include <exception>
#include <cstdlib>

void my_terminate_handler() {
    std::cerr << "‚ö° –í–ù–ò–ú–ê–ù–ò–ï: –ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å –∏–∑-–∑–∞ –Ω–µ–ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–Ω–æ–≥–æ –∏—Å–∫–ª—é—á–µ–Ω–∏—è!\n";
    std::cerr << "üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã...\n";
    std::cerr << "üö™ –ê–≤–∞—Ä–∏–π–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ.\n";
    
    // –ú–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ, –∑–∞–∫—Ä—ã—Ç—å —Ñ–∞–π–ª—ã –∏ —Ç.–¥.
    // –ù–æ –Ω–µ –±—Ä–æ—Å–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è!
    
    std::abort();  // –ò–ª–∏ exit(EXIT_FAILURE);
}

int main() {
    std::set_terminate(my_terminate_handler);
    
    throw std::runtime_error("–§–∞—Ç–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞!");
    
    return 0;
}
```

**–í—ã–≤–æ–¥:**
```
‚ö° –í–ù–ò–ú–ê–ù–ò–ï: –ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å –∏–∑-–∑–∞ –Ω–µ–ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–Ω–æ–≥–æ –∏—Å–∫–ª—é—á–µ–Ω–∏—è!
üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã...
üö™ –ê–≤–∞—Ä–∏–π–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ.
Aborted (core dumped)
```

## **–û—Å–æ–±—ã–µ —Å–ª—É—á–∞–∏ –∏ –Ω—é–∞–Ω—Å—ã —Ä–∞—Å–∫—Ä—É—Ç–∫–∏**

### **1. –î–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã –ø—Ä–∏ —Ä–∞—Å–∫—Ä—É—Ç–∫–µ –î–û–õ–ñ–ù–´ –±—ã—Ç—å `noexcept`**

```cpp
class Dangerous {
public:
    ~Dangerous() {  // –ù–ï–¢ noexcept!
        // –ï—Å–ª–∏ –∑–¥–µ—Å—å –≤—ã–±—Ä–æ—Å–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è —Ä–∞—Å–∫—Ä—É—Ç–∫–∏ —Å—Ç–µ–∫–∞...
        throw std::runtime_error("–ò—Å–∫–ª—é—á–µ–Ω–∏–µ –≤ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ!");
        // ...–ø—Ä–æ–≥—Ä–∞–º–º–∞ –í–°–ï–ì–î–ê –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —á–µ—Ä–µ–∑ std::terminate()
    }
};

void test() {
    Dangerous d;
    throw std::exception();  // –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Ä–∞—Å–∫—Ä—É—Ç–∫–∞
    // –î–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä d –≤—ã–±—Ä–æ—Å–∏—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
    // –î–í–ê –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏—è = std::terminate()
}
```

### **2. –ò—Å–∫–ª—é—á–µ–Ω–∏—è –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞—Ö**

```cpp
class Component {
public:
    Component() {
        throw std::runtime_error("–û—à–∏–±–∫–∞ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ Component");
    }
    ~Component() {
        std::cout << "~Component()" << std::endl;
    }
};

class ComplexObject {
    Component comp;
    int* data;
public:
    ComplexObject() : comp(), data(new int[100]) {
        // –ï—Å–ª–∏ Component –≤—ã–±—Ä–æ—Å–∏—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ:
        // 1. –î–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä ComplexObject –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è (–æ–±—ä–µ–∫—Ç –Ω–µ —Å–æ–∑–¥–∞–Ω)
        // 2. –î–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä Component –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è (–æ–±—ä–µ–∫—Ç –Ω–µ —Å–æ–∑–¥–∞–Ω)
        // 3. data –ù–ï –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω - –£–¢–ï–ß–ö–ê –ü–ê–ú–Ø–¢–ò!
    }
    
    ~ComplexObject() {
        delete[] data;
    }
};
```

**–†–µ—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ RAII –∏ —É–º–Ω—ã–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏:**
```cpp
class ComplexObject {
    std::unique_ptr<int[]> data;  // RAII - –æ—Å–≤–æ–±–æ–¥–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    Component comp;               // –ï—Å–ª–∏ –≤—ã–±—Ä–æ—Å–∏—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ - —ç—Ç–æ OK
public:
    ComplexObject() : data(std::make_unique<int[]>(100)), comp() {
        // –ï—Å–ª–∏ comp –≤—ã–±—Ä–æ—Å–∏—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ:
        // 1. data –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å–≤–æ–±–æ–¥–∏—Ç—Å—è (–≤—ã–∑–æ–≤–µ—Ç—Å—è –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä unique_ptr)
        // 2. –†–∞—Å–∫—Ä—É—Ç–∫–∞ —Å—Ç–µ–∫–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ
    }
};
```

### **3. –ò—Å–∫–ª—é—á–µ–Ω–∏—è –≤ `catch`-–±–ª–æ–∫–∞—Ö**

```cpp
try {
    throw std::runtime_error("–ü–µ—Ä–≤–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ");
}
catch (const std::runtime_error& e) {
    // –ú–æ–∂–Ω–æ –±—Ä–æ—Å–∏—Ç—å –Ω–æ–≤–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
    throw std::logic_error("–í—Ç–æ—Ä–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∏–∑ catch");
    
    // –ò–ª–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ –±—Ä–æ—Å–∏—Ç—å —Ç–æ –∂–µ —Å–∞–º–æ–µ
    throw;  // –ë—Ä–æ—Å–∞–µ—Ç –ü–ï–†–í–û–ï –∏—Å–∫–ª—é—á–µ–Ω–∏–µ —Å–Ω–æ–≤–∞
}
```

## **–ò—Å–∫–ª—é—á–µ–Ω–∏—è –∏ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å**

```cpp
#include <thread>
#include <iostream>

void thread_function() {
    throw std::runtime_error("–ò—Å–∫–ª—é—á–µ–Ω–∏–µ –≤ –ø–æ—Ç–æ–∫–µ!");
}

int main() {
    std::thread t(thread_function);
    
    try {
        t.join();
    }
    catch (const std::exception& e) {
        std::cerr << "–ü–æ–π–º–∞–ª–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∏–∑ –ø–æ—Ç–æ–∫–∞: " << e.what() << std::endl;
    }
    
    // –í–∞–∂–Ω–æ: –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏–∑ –ø–æ—Ç–æ–∫–æ–≤ –ù–ï –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ main
    // –ù—É–∂–Ω–æ –ª–æ–≤–∏—Ç—å –∏—Ö –ø—Ä–∏ –≤—ã–∑–æ–≤–µ join() –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å std::promise/std::future
}
```

## **–ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Å —Ä–∞—Å–∫—Ä—É—Ç–∫–æ–π —Å—Ç–µ–∫–∞**

```cpp
#include <iostream>
#include <stdexcept>
#include <vector>

class Logger {
    std::string name;
public:
    Logger(const std::string& n) : name(n) {
        std::cout << "[–°–û–ó–î–ê–ù–ò–ï] " << name << std::endl;
    }
    
    ~Logger() {
        std::cout << "[–£–ù–ò–ß–¢–û–ñ–ï–ù–ò–ï] " << name << std::endl;
    }
};

void deep_function(int level) {
    Logger log("–£—Ä–æ–≤–µ–Ω—å " + std::to_string(level));
    
    if (level >= 3) {
        throw std::overflow_error("–î–æ—Å—Ç–∏–≥–Ω—É—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å!");
    }
    
    deep_function(level + 1);
}

void intermediate() {
    Logger log("–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è");
    
    std::vector<int> data = {1, 2, 3};
    
    // RAII: vector —Å–∞–º –æ—Å–≤–æ–±–æ–¥–∏—Ç –ø–∞–º—è—Ç—å –ø—Ä–∏ —Ä–∞—Å–∫—Ä—É—Ç–∫–µ
    deep_function(1);
    
    std::cout << "–≠—Ç–æ—Ç –∫–æ–¥ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è" << std::endl;
}

int main() {
    std::cout << "=== –ù–ê–ß–ê–õ–û –ü–†–û–ì–†–ê–ú–ú–´ ===" << std::endl;
    
    try {
        Logger main_log("–û—Å–Ω–æ–≤–Ω–æ–π –±–ª–æ–∫");
        intermediate();
    }
    catch (const std::overflow_error& e) {
        std::cout << "\n=== –ü–ï–†–ï–•–í–ê–ß–ï–ù–û –ò–°–ö–õ–Æ–ß–ï–ù–ò–ï ===" << std::endl;
        std::cout << "–¢–∏–ø: std::overflow_error" << std::endl;
        std::cout << "–°–æ–æ–±—â–µ–Ω–∏–µ: " << e.what() << std::endl;
    }
    catch (...) {
        std::cout << "\n=== –ù–ï–ò–ó–í–ï–°–¢–ù–û–ï –ò–°–ö–õ–Æ–ß–ï–ù–ò–ï ===" << std::endl;
    }
    
    std::cout << "\n=== –ü–†–û–î–û–õ–ñ–ï–ù–ò–ï –†–ê–ë–û–¢–´ –ü–†–û–ì–†–ê–ú–ú–´ ===" << std::endl;
    return 0;
}
```

**–í—ã–≤–æ–¥ –ø—Ä–æ–≥—Ä–∞–º–º—ã:**
```
=== –ù–ê–ß–ê–õ–û –ü–†–û–ì–†–ê–ú–ú–´ ===
[–°–û–ó–î–ê–ù–ò–ï] –û—Å–Ω–æ–≤–Ω–æ–π –±–ª–æ–∫
[–°–û–ó–î–ê–ù–ò–ï] –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
[–°–û–ó–î–ê–ù–ò–ï] –£—Ä–æ–≤–µ–Ω—å 1
[–°–û–ó–î–ê–ù–ò–ï] –£—Ä–æ–≤–µ–Ω—å 2
[–°–û–ó–î–ê–ù–ò–ï] –£—Ä–æ–≤–µ–Ω—å 3
[–£–ù–ò–ß–¢–û–ñ–ï–ù–ò–ï] –£—Ä–æ–≤–µ–Ω—å 3  ‚Üê –ù–∞—á–∞–ª–æ —Ä–∞—Å–∫—Ä—É—Ç–∫–∏
[–£–ù–ò–ß–¢–û–ñ–ï–ù–ò–ï] –£—Ä–æ–≤–µ–Ω—å 2  ‚Üê –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ
[–£–ù–ò–ß–¢–û–ñ–ï–ù–ò–ï] –£—Ä–æ–≤–µ–Ω—å 1  ‚Üê –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ
[–£–ù–ò–ß–¢–û–ñ–ï–ù–ò–ï] –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è ‚Üê –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ
[–£–ù–ò–ß–¢–û–ñ–ï–ù–ò–ï] –û—Å–Ω–æ–≤–Ω–æ–π –±–ª–æ–∫ ‚Üê –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞—Å–∫—Ä—É—Ç–∫–∏

=== –ü–ï–†–ï–•–í–ê–ß–ï–ù–û –ò–°–ö–õ–Æ–ß–ï–ù–ò–ï ===
–¢–∏–ø: std::overflow_error
–°–æ–æ–±—â–µ–Ω–∏–µ: –î–æ—Å—Ç–∏–≥–Ω—É—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å!

=== –ü–†–û–î–û–õ–ñ–ï–ù–ò–ï –†–ê–ë–û–¢–´ –ü–†–û–ì–†–ê–ú–ú–´ ===
```

## **–ß—Ç–æ –ù–ï –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ —Ä–∞—Å–∫—Ä—É—Ç–∫–µ —Å—Ç–µ–∫–∞**

1. **–ù–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã —É–∫–∞–∑–∞—Ç–µ–ª–µ–π** (—Ç–æ–ª—å–∫–æ —É–º–Ω—ã–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏!)
   ```cpp
   void problematic() {
       int* ptr = new int[100];  // –£–¢–ï–ß–ö–ê –ü–ê–ú–Ø–¢–ò –ø—Ä–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–∏!
       throw std::exception();
       delete[] ptr;  // –ù–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è
   }
   ```

2. **–ù–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ—Å–ª–µ `throw`**

3. **–ù–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ —Ñ—É–Ω–∫—Ü–∏–π**

## **–ò—Ç–æ–≥**

**–†–∞—Å–∫—Ä—É—Ç–∫–∞ —Å—Ç–µ–∫–∞** ‚Äî —ç—Ç–æ —ç–ª–µ–≥–∞–Ω—Ç–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π:
1. **–ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ä–µ—Å—É—Ä—Å–æ–≤** —á–µ—Ä–µ–∑ RAII
2. **–û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ—Ä—è–¥–æ–∫** –ø—Ä–∏ –∞–≤–∞—Ä–∏–π–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö
3. **–û—Ç–¥–µ–ª—è–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –∫–æ–¥ –æ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫**

**–ù–µ–ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ** –ø—Ä–∏–≤–æ–¥–∏—Ç –∫:
1. **–ü–æ–ª–Ω–æ–π —Ä–∞—Å–∫—Ä—É—Ç–∫–µ —Å—Ç–µ–∫–∞** –¥–æ `main()`
2. **–í—ã–∑–æ–≤—É `std::terminate()`**
3. **–ê–≤–∞—Ä–∏–π–Ω–æ–º—É –∑–∞–≤–µ—Ä—à–µ–Ω–∏—é –ø—Ä–æ–≥—Ä–∞–º–º—ã**

**–ó–æ–ª–æ—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞:**
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **RAII** –¥–ª—è –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
2. –î–µ–ª–∞–π—Ç–µ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã **`noexcept`**
3. –ü–∏—à–∏—Ç–µ **–¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã**, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –±—Ä–æ—Å–∞—é—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è
4. –õ–æ–≤–∏—Ç–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ **–Ω–∞–∏–≤—ã—Å—à–µ–º –ø–æ–¥—Ö–æ–¥—è—â–µ–º —É—Ä–æ–≤–Ω–µ**
5. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `std::set_terminate()` –¥–ª—è –∞–≤–∞—Ä–∏–π–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è